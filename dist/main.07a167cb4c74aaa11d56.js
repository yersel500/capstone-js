(()=>{"use strict";var e={414:(e,t,n)=>{e.exports=n.p+"assets/heart.1af03272208329adeeaf..svg"}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{const e=e=>{const t=e.length,n=document.querySelector(".counterItems"),a=document.querySelector(".counterPokemons");return n.innerHTML=`Choose between our ${t} pokemons`,a.innerHTML=`(${t})`,t};var t=n(414);const a=async e=>{const t=`https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/FBTV7LVQNoUbR7Qxl6jA/comments?item_id=${e}`,n=await fetch(t);return await n.json()};const o=document.querySelector(".container");function i(e,n){let i="";e.types.forEach((e=>{i+=`${e.type.name} `}));let s=0;n.forEach((t=>{t.item_id===`heart-${e.id}`&&(s=t.likes)})),o.innerHTML+=`\n  <div class="col card-container card-${e.name}">\n    <div class="card h-100">\n      <img src=${e.sprites.other["official-artwork"].front_default} class="card-img-top" alt=${e.name}>\n      <div class="card-body">\n        <div class= "d-flex justify-content-between">\n          <h5 class="card-title d-inline">${e.name}</h5>\n          <div class="d-flex flex-column">\n            <img src="${t}" class="img-fluid d-inline ms-auto heart-${e.id} img-heart" alt="like">\n            <p class="ms-auto heart-${e.id}-likes">${s}</p>\n          </div>\n        </div>\n          <p>This is a description of the pokemon</p>\n          <button type="button" class="btn btn-primary d-block mx-auto mb-2 openComments" data-bs-toggle="modal" data-bs-target="#pokeModal-${e.id}" id="item${e.id}" >Comments</button>\n      </div>\n    </div>\n  </div>\n  <div class="modal fade" id="pokeModal-${e.id}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">\n  \n  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">\n    <div class="modal-content">\n        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n      <div class="modal-body text-center">\n      <img clas="img-fluid" src=${e.sprites.other["official-artwork"].front_default} alt=${e.name}>\n      <h3 class="modal-title" id="exampleModalLabel">${e.name}</h3>\n        <div>\n          <p>Type: <br>${i}</p>\n        </div>\n        <p>Weight: ${e.weight}</p>\n        <p>Height: ${e.height}</p>\n        <div>\n      </div>\n      <div class="displayCommentsSection-item${e.id}">\n      </div>\n      <div>\n        <h5>Add a comment</h5>\n        <input type="text" class="item${e.id}" placeholder="Your name"><br>\n        <textarea class="item${e.id}" name="textarea" rows="5" cols="25" placeholder="Leave your comment"></textarea><br>\n        <button type="button" class="btn btn-primary btn-lg btn-block comment-btn" id="item${e.id}">Comment</button>\n      </div>\n    </div>\n  </div>\n</div>`;Array.from(document.getElementsByClassName("openComments")).forEach((e=>{e.addEventListener("click",(e=>{(async()=>{const t=e.target.id,n=Array.from(await a(t)),o=n.length;if(0!==o){const e=document.querySelector(`.displayCommentsSection-${t}`);e.innerHTML=`\n          <h5>Comments (<span class="commentsCounter" id="${t}">${o}</span>)</h5> \n        `,n.forEach((t=>{e.innerHTML+=`\n          <p>${t.creation_date} ${t.username} : ${t.comment}</p>\n        `}))}else if(0===o){document.querySelector(`.displayCommentsSection-${t}`).innerHTML=`\n          <h5>Comments (<span class="commentsCounter" id="${t}">0</span>)</h5> \n        `}Array.from(document.getElementsByClassName("comment-btn")).forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.id,n=document.querySelector(`input.${t}`),a=document.querySelector(`textarea.${t}`);if(""!==n.value&&""!==a.value){const e=document.querySelector(`.displayCommentsSection-${t}`),o=`${n.value} : ${a.value}`,i=document.createElement("p");i.innerHTML=o,e.appendChild(i);const s=document.querySelector(`.commentsCounter#${t}`);s.innerHTML=Number(s.innerHTML)+1,async function(e,t,n){await fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/FBTV7LVQNoUbR7Qxl6jA/comments",{method:"POST",headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({item_id:e,username:t,comment:n})})}(t,n.value,a.value),n.value="",a.value=""}}))}))})()}))}));Array.from(document.getElementsByClassName("img-heart")).forEach((e=>{e.addEventListener("click",(e=>{const t=document.querySelector(`.${e.target.classList[3]}-likes`),n=t.textContent.match(/(\d+)/);t.innerHTML=`${Number(n[0])+1}`,async function(e){await fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/FBTV7LVQNoUbR7Qxl6jA/likes",{method:"POST",headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({item_id:e})})}(e.target.classList[3])}))}))}window.onload=()=>{!async function(){const t=await fetch("https://pokeapi.co/api/v2/pokemon?limit=36"),n=await t.json(),a=await fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/FBTV7LVQNoUbR7Qxl6jA/likes"),o=await a.json();n.results.forEach((e=>{const{url:t}=e;fetch(t).then((e=>e.json())).then((e=>i(e,o)))})),e(n.results)}()}})()})();